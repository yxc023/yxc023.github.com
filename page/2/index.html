<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="技术记事本">
<meta property="og:url" content="http://blog.yangxiaochen.com/page/2/index.html">
<meta property="og:site_name" content="技术记事本">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="技术记事本">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.yangxiaochen.com/page/2/"/>





  <title>技术记事本</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">技术记事本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/26/java/java-in-action-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/26/java/java-in-action-4/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-26T23:56:30+08:00">
                2016-04-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-19T23:47:32+08:00”<br>draft = false<br>title = “Java开发实践(四. 日志)”<br>categories = [ “java” ]<br>type=”java”<br>payable=”true”<br>+++</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/19/java/java-in-action-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/19/java/java-in-action-3/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-19T23:47:56+08:00">
                2016-04-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-19T23:47:32+08:00”<br>draft = false<br>title = “Java开发实践(三. 配置趋势–Programmatically)”<br>categories = [ “java” ]<br>type=”java”<br>payable=”true”<br>+++</p>
<p>以spring的配置为例, 我们习惯于applicationContext.xml配置.</p>
<p>诚然, 软件开发的配置经历了 <code>硬编码 -&gt; 配置文件</code> 这个过程. 开发人员在不需要更改代码重新编译, 就可以修改配置信息.</p>
<p>然而, 这也带来了一些问题, 就是xml的泛滥. 对于复杂的项目, 面对一堆xml, 我们会发现:</p>
<pre><code>1. 这些xml的内容并不好读. 标记语言结构冗长, 可读性差.
2. 谁使用了这些配置. 这些配置是被谁加载的, 如何使用的, 追根麻烦.
3. 对照费劲. 当你代码中使用一个bean, 需要翻看每一个xml文件来寻找这个bean. (虽然有IDE可以帮助查找)
4. 配置文件书写复杂. 很多ide并没有补全提示, 你需要记住会用到什么标签, 以及属性.
5. ...
</code></pre><p>对于spring的一些配置文件来说, 其实是把一些逻辑给加入到配置文件当中了. 比如配置切面, 比如配置访问控制等. 这势必会造成程序的不易理解, 因为代码语法固定, 大家都很熟悉, 但是配置文件就不是了, 而且来回翻看容易混乱.</p>
<h2 id="Programmatically配置"><a href="#Programmatically配置" class="headerlink" title="Programmatically配置"></a>Programmatically配置</h2><blockquote>
<p>用代码的方式来做配置. JAVA-BASED. 对各个组件的注入声明, 构建初始化, 采用代码的方式来做. 目前Spring中有一些JAVA-BASED配置的相关章节.</p>
</blockquote>
<p>有人会说了, 你这就是硬编码了! 容我解释:</p>
<pre><code>1. 对于bean, 业务, 各种组件的加载, 初始化. 使用Programmatically的方式来做配置.
2. 用一个`application.yaml`来作为配置属性的存放.
3. `application.yaml`拥有多个`application.[env].yaml`的覆盖版本, 用来在不同环境覆盖配置.`application.[env].yaml`可以只是`application.yaml`内容的一部分. 使用构建脚本如gradle来实现覆盖逻辑, 或者在Programmatically配置时实现覆盖逻辑.
4. `application.yaml`存放所有配置参数. 如各种服务端口, 组件是否加载, 组件的加载参数等等...
</code></pre><p>所以, 我们不是硬编码, 我们把不易变得部分进行了代码化, 使程序员易读, 理解其中加载细节, 同时, 使IDE跳转查找更加方便.</p>
<p>另外, yaml文件的易读性要比xml好很多, 配置属性查找方便.</p>
<p>配置覆盖策略保证各个环境运行的便捷性.</p>
<h2 id="配合注解"><a href="#配合注解" class="headerlink" title="配合注解"></a>配合注解</h2><p>Programmatically配置, 合理配合注解, 也可以实现很多更简便的配置.</p>
<h2 id="不完全抛弃xml"><a href="#不完全抛弃xml" class="headerlink" title="不完全抛弃xml"></a>不完全抛弃xml</h2><p>事实上, 一般能用xml配置的框架或者项目或者类库, 都可以用代码来实现配置. 如果不行, 引入xml也是可以的.</p>
<blockquote>
<p>我们的目的就是减少xml, 使用更纯粹的配置方式, 统一配置信息入口. 易懂, 易读, 易查.</p>
<p>spring-boot就有点这种配置的感觉, 我在之前项目中应用了一些也感觉良好, 所以有理有据推荐~ 饱含实践经验.</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/17/java/java-in-action-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/17/java/java-in-action-2/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-17T14:46:11+08:00">
                2016-04-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-17T14:47:32+08:00”<br>draft = false<br>title = “Java开发实践(二. 框架选型)”<br>categories = [ “java” ]<br>type=”java”<br>payable=”true”<br>+++</p>
<h1 id="DI框架"><a href="#DI框架" class="headerlink" title="DI框架"></a>DI框架</h1><ul>
<li>spring</li>
<li>guice</li>
</ul>
<h1 id="日志框架"><a href="#日志框架" class="headerlink" title="日志框架"></a>日志框架</h1><ul>
<li>slf4j + logback</li>
<li>log4j2</li>
</ul>
<h1 id="Json"><a href="#Json" class="headerlink" title="Json"></a>Json</h1><ul>
<li>Jackson</li>
</ul>
<h1 id="web"><a href="#web" class="headerlink" title="web"></a>web</h1><ul>
<li>spring-mvc</li>
</ul>
<h1 id="数据库访问层"><a href="#数据库访问层" class="headerlink" title="数据库访问层"></a>数据库访问层</h1><ul>
<li>spring-jdbc</li>
<li>mybatis</li>
</ul>
<h1 id="工具类库"><a href="#工具类库" class="headerlink" title="工具类库"></a>工具类库</h1><ul>
<li>apacha-commons</li>
<li>google-guava</li>
<li>spring-utils</li>
</ul>
<h1 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h1><ul>
<li>Jackson</li>
<li>kryo</li>
</ul>
<h1 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h1><ul>
<li>jetty</li>
<li>tomcat</li>
<li>wildfly(undertow)</li>
<li>netty</li>
</ul>
<h1 id="微服务框架"><a href="#微服务框架" class="headerlink" title="微服务框架"></a>微服务框架</h1><ul>
<li>spring-boot</li>
</ul>
<h1 id="响应式框架"><a href="#响应式框架" class="headerlink" title="响应式框架"></a>响应式框架</h1><ul>
<li>vert.x</li>
<li>rxJava</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/16/java/java-in-action-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/16/java/java-in-action-1/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-16T00:17:55+08:00">
                2016-04-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-15T01:19:32+08:00”<br>draft = false<br>title = “Java开发实践(一. 生态环境)”<br>categories = [ “java” ]<br>type=”java”<br>payable=”true”<br>+++</p>
<h1 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h1><p><strong>Intellij Idea</strong> The best java IDE.</p>
<ol>
<li>集成了java常用的各种工具, 比如构建工具(maven, gradle), 版本控制(git, svn…)</li>
<li>代码提示, 补全非常舒服.</li>
<li>项目管理灵活, 识别项目类型, 并集成多种常用框架.</li>
<li>支持语言多, 比如Kotlin.</li>
<li>插件丰富</li>
<li>界面漂亮</li>
<li>速度快.</li>
</ol>
<p>Android Studio也从Eclipse转到了Idea. 体验非常好</p>
<p>唯一的缺点就是太贵, 好在就免费版本, 虽然少了一些功能, 但主要功能都没有问题. 当然, 如果你愿意找找看的话, 还有XX版.</p>
<blockquote>
<p>Idea 走起, 次世代的IDE</p>
</blockquote>
<h1 id="构建工具"><a href="#构建工具" class="headerlink" title="构建工具"></a>构建工具</h1><p>习惯用gradle, 虽然gradle复杂的配置也不简单, 但是语法清晰, 简洁.</p>
<p>支持复杂的构建脚本, 综合了maven和ant的优点. 比maven灵活.</p>
<p>是Android的官方构建工具</p>
<p><strong>缺点:</strong></p>
<ol>
<li>很多项目还是习惯用maven, 不过一半都可以方便的转Gradle.  </li>
<li>过于灵活, 经常会出现”聪明”的构建脚本</li>
<li>有一定的学习成本.(maven其实也有)</li>
</ol>
<p><strong>优点:</strong></p>
<ol>
<li>语法简洁, 配置简单.</li>
<li>灵活, 脚本化.</li>
<li>文档丰富, 官方文档详尽 , 而且可以构建多种语言.</li>
<li>支持Android</li>
</ol>
<blockquote>
<p>推荐接受Gradle, 接受新事物. 熟悉之后会带来非常多的便捷.</p>
</blockquote>
<h1 id="JDK版本"><a href="#JDK版本" class="headerlink" title="JDK版本"></a>JDK版本</h1><p>最新的就是最好的. 当前的话就是JAVA8</p>
<p>不要担心新的不稳定. 都是经过千锤百炼才发布的.</p>
<p>不仅更快, 在兼容之前版本的同时, 还提供了很多新的语法特性, 保持语言的先进性.</p>
<blockquote>
<p>能上JDK8, 不要犹豫起来嗨.</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/14/java/thread-coordinate-n-methods/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/14/java/thread-coordinate-n-methods/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-14T01:33:04+08:00">
                2016-04-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-13T23:19:32+08:00”<br>draft = false<br>title = “Java线程协调的多种写法”<br>categories = [ “java” ]<br>type=”java”<br>payable=”true”<br>+++</p>
<blockquote>
<p>回字的四种写法…</p>
</blockquote>
<p>假设有三个比较耗时的非cpu密集型任务, 最后的结果分些需要这三个任务的结果相加, 使用多线程并发可以让三个任务同时进行.</p>
<p>下面是几种写法:</p>
<pre><code>package com.yangxiaochen;

import java.util.concurrent.ExecutionException;
import java.util.concurrent.ForkJoinTask;
import java.util.concurrent.FutureTask;
import java.util.concurrent.Semaphore;

/**
 * @author yangxiaochen
 * @date 16/4/14 上午12:17
 */
public class ForkJoinTest {


    public int m1() {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(&quot;m1&quot;);
        return 1;
    }

    public int m2() {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(&quot;m2&quot;);
        return 2;
    }

    public int m3() {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(&quot;m3&quot;);
        return 3;
    }

    public static void main(String[] args) throws ExecutionException, InterruptedException {
        type0();
//        type1();
//        type2();
//        type3();
//        type4();

    }

    private static void type0() throws InterruptedException {
        ForkJoinTest test = new ForkJoinTest();
        class Holder {
            int a;
            int b;
            int c;
        }
        Holder h = new Holder();

        Thread t1 = new Thread(() -&gt; h.a = test.m1());
        t1.start();

        Thread t2 = new Thread(() -&gt; h.b = test.m2());
        t2.start();

        Thread t3 = new Thread(() -&gt; h.c = test.m3());
        t3.start();

        t1.join();
        t2.join();
        t3.join();
        System.out.println(h.a + h.b + h.c);
    }

    private static void type4() throws InterruptedException {
        Semaphore semaphore = new Semaphore(0);

        ForkJoinTest test = new ForkJoinTest();
        class Holder {
            int a;
            int b;
            int c;
        }
        Holder h = new Holder();

        new Thread(() -&gt; {
            h.a = test.m1();
            semaphore.release();
        }).start();

        new Thread(() -&gt; {
            h.b = test.m2();
            semaphore.release();
        }).start();

        new Thread(() -&gt; {
            h.c = test.m3();
            semaphore.release();
        }).start();


        semaphore.acquire(3);
        System.out.println(h.a + h.b + h.c);
    }

    private static void type3() throws InterruptedException {
        ForkJoinTest test = new ForkJoinTest();
        class Holder {
            int a;
            int b;
            int c;
        }
        Holder h = new Holder();

        new Thread(() -&gt; {
            h.a = test.m1();
            synchronized (test) {
                if (h.a != 0 &amp;&amp; h.b != 0 &amp;&amp; h.c != 0) {
                    test.notify();
                }
            }
        }).start();

        new Thread(() -&gt; {
            h.b = test.m2();
            synchronized (test) {
                if (h.a != 0 &amp;&amp; h.b != 0 &amp;&amp; h.c != 0) {
                    test.notify();
                }
            }
        }).start();

        new Thread(() -&gt; {
            h.c = test.m3();
            synchronized (test) {
                if (h.a != 0 &amp;&amp; h.b != 0 &amp;&amp; h.c != 0) {
                    test.notify();
                }
            }
        }).start();


        synchronized (test) {
            test.wait();
        }

        System.out.println(h.a + h.b + h.c);
    }

    private static void type2() throws InterruptedException, ExecutionException {
        ForkJoinTest test = new ForkJoinTest();

        FutureTask&lt;Integer&gt; f1 = new FutureTask&lt;&gt;(() -&gt; test.m1());
        FutureTask&lt;Integer&gt; f2 = new FutureTask&lt;&gt;(() -&gt; test.m2());
        FutureTask&lt;Integer&gt; f3 = new FutureTask&lt;&gt;(() -&gt; test.m3());

        new Thread(f1).start();
        new Thread(f2).start();
        new Thread(f3).start();

        System.out.println(f1.get() + f2.get() + f3.get());
    }

    private static void type1() throws InterruptedException, ExecutionException {

        ForkJoinTest test = new ForkJoinTest();

        ForkJoinTask&lt;Integer&gt; f1 = ForkJoinTask.adapt(() -&gt; test.m1()).fork();
        ForkJoinTask&lt;Integer&gt; f2 = ForkJoinTask.adapt(() -&gt; test.m2()).fork();
        ForkJoinTask&lt;Integer&gt; f3 = ForkJoinTask.adapt(() -&gt; test.m3()).fork();

        System.out.println(f1.join() + f2.join() + f3.join());
    }
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/04/secure/a-lost-iphone-secure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/04/secure/a-lost-iphone-secure/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-04T23:16:19+08:00">
                2016-04-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-04T23:19:32+08:00”<br>draft = false<br>title = “从一个丢失的iphone看互联网信息安全”<br>categories = [ “secure” ]<br>type=”secure”<br>payable=”true”<br>+++</p>
<h1 id="一个真实故事"><a href="#一个真实故事" class="headerlink" title="一个真实故事"></a>一个真实故事</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>  妹子把手机丢了…是在上公交车时, 妹子第二个上车, 头一个上去的黑色羽绒服男上车后问师傅是否去XX地, 师傅说不去, 黑羽绒服男就又挤下了车. 上车坐定一会, 妹子就发现手机不见了. 再打关机. 妹子说上车前确定手机还在 ,可以肯定就是那个黑衣服男偷得.</p>
<p>  之后补卡, 改密码等等善后事宜暂且不表. 且说说后续一些列发展引起我对互联网安全的思考.</p>
<h2 id="开端"><a href="#开端" class="headerlink" title="开端"></a>开端</h2><p>  用iphone手机的用户都知道, 一个iphone由一个appleid激活, 如果不进行反激活, 是无法登陆其他appleid的. 所以妹子就打开了丢失模式. 当丢失的手机打开联网时定位并且锁定. 小偷不知道appleid的密码, 就无法解锁手机, 也就无法转手卖出.</p>
<p>  头几天鸟无音信.</p>
<p>  在一两周后, 妹子邮箱接连收到邮件, 内容大概是:</p>
<blockquote>
<p>您的iphone正在尝试解锁刷机, 如果是您操作, 请忽略; 如果不是您操作, 请登录<a href="#">Apple ID 服务中心</a>进行取消操作. 该操作将在12小时后被允许.</p>
</blockquote>
<p>  署名是 <code>Apple ID Service</code>.</p>
<p>  还好妹子是对这种事情无从下手, 问我怎么办, 我比较警惕, 说转发给我, 我接到后打开, 发现这个邮件的格式和内容很正式. 但是很明显有以下几个问题:</p>
<ol>
<li>邮件来源地址不是<code>apple.com</code>, 而是一个其他的地址.</li>
<li><p>邮件中登陆Apple ID 中心的链接也不是官方的.</p>
<p>打开这个链接, 是个和<code>查找 iphone</code>登录界面完全一样的页面. 当然, 这是个伪造的钓鱼网站, 如果妹子自己打开这个并输入了appleid和密码, 那么账号密码就已经陷落了.</p>
<blockquote>
<p>注意: 如果是手机邮箱, 那么发件人的地址默认是隐藏的. 而且, 打开链接后网页的url也是隐藏的. 所以, 如果是手机打开邮件, 很难分辨真假.</p>
</blockquote>
</li>
</ol>
<p>  可见, 被偷iphone手机, 由于其激活机制的特殊性, 产生了一条很色的产业链:</p>
<pre><code>小偷 -&gt; 网络诈骗技术者
</code></pre><p>  小偷偷到手机后, 无法解锁, 只能卖给下线. 下线是大型的收购商, 来收购被偷的iphone, 然后进行批量的邮件进行钓鱼, 骗取密码解锁手机.</p>
<p>  于是我告诉妹子, 这种邮件都不要乱点, 不要输入你任何信息.</p>
<h2 id="继续"><a href="#继续" class="headerlink" title="继续"></a>继续</h2><p>  陆续几天, 还是有同样的伪造刷机警告发来, 妹子都置之不理. 直到开始受到新的类型的邮件, 大概内容:</p>
<blockquote>
<p>你的手机在我们公司, 我们无法解锁, 所以按照我们的收购价800块卖给你. 请看<a href="#">图片</a>, <a href="#">店铺地址</a>.</p>
</blockquote>
<p>  妹子经过上一波教训, 已经对互联网有一定的畏惧心理, 所以丝毫没动, 转发给我.</p>
<p>  我收到后打开, 明显的, 日然是来历不明的邮箱地址. 而且, 店铺地址的链接也是来历不明的.</p>
<p>  虽然是来历不明的链接, 我还是想点进去看看, 于是, 我进行了点击. 结果是:</p>
<p>  空白页面…</p>
<p>  为什么是空白页面呢, 怎么不是钓鱼网站了? 于是我打开chrome开发者模式, 重新打开链接, 有很多请求, 我意识到, 这可能是xss攻击.</p>
<p>  有一个XXX.qq.com域名的请求, 中间进行了重定向, 然后又发送一个特殊url的请求, 这个url暂不公开, 可以假设为 xsssite.net</p>
<p>  因为妹子的appleid用的是qq邮箱. 所以如果对qq.com域名下的一个网页注入脚本的话, 当用户打开这个网页, 很可能能拿到这个用户的登录信息.</p>
<p>  由于这次我是从转发的邮件打开的链接, 所以泄露的是我的登录信息, 所以并无大碍.(跨站脚本只是获取了你的登录状态, 能够一段时间内伪造登录状态, 而并不是获取了你的密码)</p>
<p>  xsssite.net这个域名的请求包含的很多内容, 且这个网站就是一个xss攻击的平台. 关于这个xss攻击位置, 如何获取登录状态, 传递了哪些信息, 我还尚未去详细查看, 以后分享给大家.</p>
<p>  我很感叹, 这个产业链远比我想象的发达:</p>
<pre><code>小偷 -&gt; 网络诈骗技术者 -&gt; 黑客
</code></pre><h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>  后来, 由于一些事情, 还是在妹子的登录状态打开一个这种连接, 对方登陆了妹子的邮箱, 从而重置了appleid密码, 当然期间有apple的邮件, 但是妹子以为是假的, 直接忽略掉了. 我没有及时得到消息, 还是让对方得逞了.</p>
<h1 id="故事之后的反思"><a href="#故事之后的反思" class="headerlink" title="故事之后的反思"></a>故事之后的反思</h1><p>  前面讲了妹子的遭遇, 我又想起近几年几次密码泄露, 信息泄露的事件, 深感互联网安全非常重要, 豺狼虎视眈眈, 但是绝大多数人丝毫没有防范意识. 所以我想了一些关于互联网安全的知识, 提示, 以及应对措施. 给大家普及一下.</p>
<h4 id="互联网危险到何种程度"><a href="#互联网危险到何种程度" class="headerlink" title="互联网危险到何种程度"></a>互联网危险到何种程度</h4><p>  请看<a href="WooYun.org">乌云网</a>, 白客们所发现的各种系统漏洞. 触目惊心.</p>
<p>  几年前csdn的数据库泄露事故, 余威犹在. 后续几次京东, 7k7k等网站的大量用户密码泄露都是这次事故的后遗症.</p>
<p>  黑色产业链早已超乎你我的想象. 道高一尺魔高一丈. 你的一切都时时刻刻被攻击者盯着, 不要有侥幸心理.</p>
<h4 id="关于密码"><a href="#关于密码" class="headerlink" title="关于密码"></a>关于密码</h4><ol>
<li><p>密码与社会工程学</p>
<blockquote>
<p>社会工程学: 一种通过对受害者心理弱点、本能反应、好奇心、信任、贪婪等心理陷阱进行诸如欺骗、伤害等危害手段取得自身利益的手法.</p>
</blockquote>
<p>举个例子, 最简单的社会工程学案例, 就是根据你的生日来推测你的银行卡密码. 根据人们慵懒的习惯, 尝试<code>123456</code>, <code>asd123</code>, <code>abcd</code> 等方便输入的习惯来推测你的密码. 所以说, 根据你的个人信息, 比如生日, 身份证号, 门牌号, 亲友生日, 名字拼写, 短语拼写等任何对你有意义的字符序列, 都会被认为是你的潜在密码. 依靠计算机的自动化, 计算效率, 可以不停的对大量的用户数据进行尝试破解.</p>
<p><strong>所以我们应该避免使用和自身信息有关的密码</strong></p>
</li>
</ol>
<ol>
<li><p>安全并不在你的掌握之中</p>
<p>使用随机的, 比较复杂的密码, 就可以确保账号安全了么? 很遗憾, 不是的.</p>
<p>因为你的密码不仅仅是你自己要保管, 你所注册的网站, 应用也需要保管. 所以, 你所使用的网站, 应用是否在安全上做足了必要的功夫, 是很重要的.</p>
<p>前几年CSDN数据库泄露, 大量用户资料被盗, 令人震惊的是他们的密码是明文的….</p>
<p>根据用户们懒惰的习惯, 不愿意记很多密码, 于是可以假设用户们都喜欢用同一套用户名密码来登陆所有网站,应用. 一时间, 大量网站,应用被撞库成功.</p>
<p>原则上, 网站是不会保存明文密码的, 他们所保存的是对你的密码进行不可逆加密后的密文, 每次你登陆输入密码, 网站会对输入的密码进行同样的不可逆加密, 然后与保存的密文进行对比来验证正确性. 这样在网站数据库泄露时, 用户密码至少不会以明文显示在盗窃者面前.</p>
<p>同时, 网站也不应该仅仅用md5简单加密. 如今对于简单通用的加密手段, 黑客已经有数量庞大的样本来进行比较, 所以, 简单通用加密的效果已经接近明文了.所以, 加密时加入随机的salt, 是常用的方法.</p>
<p><strong>避免所有账号都是同一密码. 可以简单分成几级账号密码, 你的关键应用比如qq号, 支付宝, 邮箱等的密码, 一定不要与注册小网站的密码一样.</strong></p>
<p><strong>不要轻易进行注册, 尤其对于小网站, 他们的技术相对于薄弱, 安全工作做得不够. 建议小网站都使用第三方认证的方式</strong></p>
</li>
<li><p>二步验证</p>
<p>在输入密码后, 需要再进行一次密码验证.</p>
<blockquote>
<p>One Time Password: 一次性密码, 每个密码只在一次, 或者很短的时间内有效. 下次登录或认真, 就会用不同的密码.</p>
</blockquote>
<p>这个已经非常常见了, 比如常见的手机验证码, 暴雪战网的安全令牌.</p>
<p>如果你的账号可以开通二步验证, 强烈推荐开通, 虽然每次耽误点时间, 但是可以对你的账号进行非常好的保护.</p>
<p><strong>Apple ID, Google账号, QQ邮箱(使用qq安全中心) 等都支持二步验证, 建议都去开通一下吧</strong></p>
</li>
</ol>
<h4 id="关于常用邮箱"><a href="#关于常用邮箱" class="headerlink" title="关于常用邮箱"></a>关于常用邮箱</h4><ol>
<li><p>你的安全老巢</p>
<p>你的邮箱有多重要? 如果你的邮箱被别人登陆:</p>
<ol>
<li>首先, 你的个人信息被别人一览无余. 而且, 有的同学还喜欢用邮箱来作为记事本.</li>
<li>可以随时重置你的各种网站, 应用的密码!</li>
</ol>
</li>
<li><p>独立密码</p>
<p>如果你使用网易, QQ, 新浪等不管是什么邮箱, 要设置独立密码! 如同妹子邮箱被登录的教训. 如果你在网易, QQ, 新浪的账号登录状态被xss攻击获得, 那么攻击者可以直接进入你的邮箱!</p>
<p>这些大网站, 大企业的安全做得很好不用担心? 我承认, 这些大企业的核心业务是没有问题的, 关键在于这些企业家大业大, 设计的方面非常多, 部门也非常多, 甚至分布在不同的地点, 所以不可能所有的地方都能做好安全措施. 妹子这个例子中, 应该是QQ的大粤网中论坛的漏洞, 被进行了xss攻击.</p>
<p>话说回来, 林子大, 什么鸟都有, 你不能保证这些企业当中有黑客的存在. 就像你找人做了个保险箱, 你不能保证这个人是不是留了一把钥匙, 或者在保险箱你不知道地方做了个机关. 尤其对这些企业的非核心业务的技术人员, 并不事都是经过严格考核进来的.</p>
</li>
<li><p>不要轻易在浏览器中从邮箱中打开连接</p>
<p>切记, 邮箱中的不确定连接不要轻易就打开, 尤其实在浏览器环境下使用邮箱的时候. 预防xss攻击.</p>
<p>如果打开链接, 发现有异常, 查看请求记录, 如果有疑似xss攻击, 果断退出登录状态, 修改密码. 然后把该链接提交给出现漏斗的网站.(技术工作者)</p>
<p><strong>如果要在浏览器中打开链接, 请使用”隐身窗口中打开”, 据我所知Chrome, 以及使用Chrome内核的浏览器基本都支持</strong></p>
</li>
</ol>
<h4 id="关于手机号"><a href="#关于手机号" class="headerlink" title="关于手机号"></a>关于手机号</h4><ol>
<li><p>你的安全命门</p>
<p>当你的手机丢了, 第一件事, 补卡. 让丢失的卡不能再使用.</p>
<p>当你的手机落入别人手中, 又能正常使用, 那么它可以使用很多应用的二步验证.</p>
<p>作为一些应用的密保手机, 它能够充值你这些应用的密码.</p>
<p><strong>手机丢了先补卡</strong></p>
</li>
</ol>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>  如果你对妹子的经历感兴趣, 想获取妹子收到的邮件样本, 请在评论里留下你的邮箱, 说明要获取邮件样本, 我会不定期地查看进行转发.</p>
<p>  当然, 对于产生的一些列问题我特此声明不负任何责任.</p>
<p>  如果你觉得本文对你有帮助和启发, 可以转发给其他人, 以示提醒.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/03/linux/port-check/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/03/linux/port-check/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-03T20:49:26+08:00">
                2016-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-03T20:29:32+08:00”<br>draft = false<br>title = “检测端口是否打开”<br>categories = [ “port” ]<br>type=”linux”</p>
<p>+++<br>.</p>
<pre><code>telnet 127.0.0.1 1017
</code></pre><p>.</p>
<pre><code>nc -uz 127.0.0.1 1017
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/03/linux/top-thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/03/linux/top-thread/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-03T20:47:51+08:00">
                2016-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-01T23:19:32+08:00”<br>draft = false<br>title = “定位占用cpu的线程”<br>categories = [ “ssh-key” ]<br>type=”linux”</p>
<p>+++</p>
<p>.</p>
<pre><code>top -Hp 18207
</code></pre><p>.</p>
<pre><code>jstack &lt;pid&gt;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/04/03/linux/performance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/03/linux/performance/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-03T20:47:45+08:00">
                2016-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-04-01T23:29:32+08:00”<br>draft = false<br>title = “性能分析vmstat”<br>categories = [ “vmstat” ]<br>type=”linux”</p>
<p>+++</p>
<ol>
<li>性能分析的目的</li>
</ol>
<p>1）找出系统性能瓶颈（包括硬件瓶颈和软件瓶颈）；<br>2）提供性能优化的方案（升级硬件？改进系统系统结构？）；<br>3）达到合理的硬件和软件配置；<br>4）使系统资源使用达到最大的平衡。（一般情况下系统良好运行的时候恰恰各项资源达到了一个平衡体，任何一项资源的过渡使用都会造成平衡体系破坏，从而造成系统负载极高或者响应迟缓。比如CPU过渡使用会造成大量进程等待CPU资源，系统响应变慢，等待会造成进程数增加，进程增加又会造成内存使用增加，内存耗尽又会造成虚拟内存使用，使用虚拟内存又会造成磁盘IO增加和CPU开销增加）</p>
<ol>
<li>影响性能的因素</li>
</ol>
<p>1）CPU（cpu的速度与性能很大一部分决定了系统整体的性能，是否使用SMP）</p>
<p>2）内存（物理内存不够时会使用交换内存，使用swap会带来磁盘I0和cpu的开销）</p>
<p>3）硬盘（存储系统）<br>a.Raid技术使用（RAID0, RAID1, RAID5, RAID0+1）<br>b.小文件读写瓶颈是磁盘的寻址（tps），大文件读写的性能瓶颈是带宽<br>c.Linux可以利用空闲内存作文件系统访问的cache，因此系统内存越大存储系统的性能也越好</p>
<p>4）网络带宽。</p>
<ol>
<li>性能分析的步骤</li>
</ol>
<p>1)对资源的使用状况进行长期的监控和数据采集（nagios、cacti）</p>
<p>2）使用常见的性能分析工具（vmstat、top、free、iostat等)</p>
<p>3）经验积累<br>a.应用程序设计的缺陷和数据库查询的滥用最有可能导致性能问题<br>b.性能瓶颈可能是因为程序差/内存不足/磁盘瓶颈，但最终表现出的结果就是CPU耗尽，系统负载极高，响应迟缓，甚至暂时失去响应<br>c.物理内存不够时会使用交换内存，使用swap会带来磁盘I0和cpu的开销<br>d.可能造成cpu瓶颈的问题：频繁执Perl，php，java程序生成动态web；数据库查询大量的where子句、order by/group by排序……<br>e.可能造成内存瓶颈问题：高并发用户访问、系统进程多，java内存泄露……<br>f.可能造成磁盘IO瓶颈问题：生成cache文件，数据库频繁更新，或者查询大表……</p>
<ol>
<li>vmstat详细介绍</li>
</ol>
<p>vmstat是一个很全面的性能分析工具，可以观察到系统的进程状态、内存使用、虚拟内存使用、磁盘的IO、中断、上下文切换、CPU使用等。对于 Linux 的性能分析，100%理解 vmstat 输出内容的含义，并能灵活应用，那对系统性能分析的能力就算是基本掌握了。<br>下面是vmstat命令的输出结果：</p>
<pre><code>[root@monitor-www ~]# vmstat 1 5
procs         —————memory—————      ——swap—— ——io——  ——system——   ——cpu——
r   b    swpd     free       buff      cache   si    so    bi     bo      in    cs    us sy  id wa st
1   0    84780    909744   267428    1912076   0     0     20     94       0     0     2  1  95  1  0
1   2    84780    894968   267428    1912216   0     0      0   1396    2301 11337     8  3  89  0  0
1   0    84780    900680   267428    1912340   0     0     76   1428    1854  8082     7  2  90  0  0
1   0    84780    902544   267432    1912548   0     0    116    928    1655  7502     7  2  92  0  0
2   0    84780    900076   267432    1912948   0     0    180    904    1963  8703    10  3  87  0  0
</code></pre><p>对输出解释如下：</p>
<p>1）procs</p>
<p>a.r列表示运行和等待CPU时间片的进程数，这个值如果长期大于系统CPU个数，就说明CPU资源不足，可以考虑增加CPU；<br>b.b列表示在等待资源的进程数，比如正在等待I/O或者内存交换等。</p>
<p>2）memory</p>
<p>a.swpd列表示切换到内存交换区的内存数量（以KB为单位）。如果swpd的值不为0或者比较大，而且si、so的值长期为0，那么这种情况一般不用担心，不会影响系统性能；<br>b.free列表示当前空闲的物理内存数量（以KB为单位）；<br>c.buff列表示buffers cache的内存数量，一般对块设备的读写才需要缓冲；<br>d.cache列表示page cached的内存数量，一般作文件系统的cached，频繁访问的文件都会被cached。如果cached值较大，就说明cached文件数较多。如果此时IO中的bi比较小，就说明文件系统效率比较好。</p>
<p>3）swap</p>
<p>a.si列表示由磁盘调入内存，也就是内存进入内存交换区的数量；<br>b.so列表示由内存调入磁盘，也就是内存交换区进入内存的数量<br>c.一般情况下，si、so的值都为0，如果si、so的值长期不为0，则表示系统内存不足，需要考虑是否增加系统内存。</p>
<p>4）IO</p>
<p>a.bi列表示从块设备读入的数据总量（即读磁盘，单位KB/秒）<br>b.bo列表示写入到块设备的数据总量（即写磁盘，单位KB/秒）<br>这里设置的bi+bo参考值为1000，如果超过1000，而且wa值比较大，则表示系统磁盘IO性能瓶颈。</p>
<p>5）system</p>
<p>a.in列表示在某一时间间隔中观察到的每秒设备中断数；<br>b.cs列表示每秒产生的上下文切换次数。<br>上面这两个值越大，会看到内核消耗的CPU时间就越多。</p>
<p>6）CPU</p>
<p>a.us列显示了用户进程消耗CPU的时间百分比。us的值比较高时，说明用户进程消耗的CPU时间多，如果长期大于50%，需要考虑优化程序啥的。<br>b.sy列显示了内核进程消耗CPU的时间百分比。sy的值比较高时，就说明内核消耗的CPU时间多；如果us+sy超过80%，就说明CPU的资源存在不足。<br>c.id列显示了CPU处在空闲状态的时间百分比；<br>d.wa列表示IO等待所占的CPU时间百分比。wa值越高，说明IO等待越严重。如果wa值超过20%，说明IO等待严重。<br>e.st列一般不关注，虚拟机占用的时间百分比。 （Linux 2.6.11）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.yangxiaochen.com/2016/03/31/mac/create-dir-home/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Michael">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术记事本">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/31/mac/create-dir-home/" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-31T23:48:01+08:00">
                2016-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>+++<br>date = “2016-03-31T23:19:32+08:00”<br>draft = false<br>title = “mkdir在/home目录下新建文件夹 for mac”<br>categories = [ “mac”,”mkdir” ]<br>type=”mac”<br>+++</p>
<p>Hmmm, trying to create a directory under ‘/home’ on a Mac?</p>
<p>Well, Apple doesn’t want you to (with good reason, automounter owns this dir, which makes it easier to do NFS mounts and such) so you shouldn’t muck with it but if you really just ‘have to do it’, here is how you can.</p>
<p>Basically: Edit <code>/etc/auto_master</code> and remove or comment out the line that starts with “/home”.</p>
<p>example:</p>
<pre><code>sudo vim /etc/auto_master
</code></pre><p>before:</p>
<pre><code># Automounter master map
+auto_master            # Use directory service
/net                    -hosts          -nobrowse,hidefromfinder,nosuid
/home                  auto_home      -nobrowse,hidefromfinder
/Network/Servers        -fstab
/-                      -static
</code></pre><p>after:</p>
<pre><code># Automounter master map
+auto_master            # Use directory service
/net                    -hosts          -nobrowse,hidefromfinder,nosuid
#/home                  auto_home      -nobrowse,hidefromfinder
/Network/Servers        -fstab
/-                      -static
</code></pre><p>to have the change take effect without a reboot:</p>
<pre><code>sudo automount
</code></pre><p>.</p>
<pre><code>mkdir /home/test
ls -l /home/
total 0
drwxr-xr-x 3 root admin 102 Aug 10 11:33 test
</code></pre><p>NOTE: I wouldn’t do anything ‘important’ with this directory as it’s easy to forget you altered this and an upgrade will plow over this directory, removing all data. (this dir is also not included in any Time Machine backups.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Michael" />
          <p class="site-author-name" itemprop="name">Michael</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Michael</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
